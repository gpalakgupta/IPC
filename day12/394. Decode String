class Solution {
    public String decodeString(String s) {
        Stack<Integer> counts = new Stack<>();
        Stack<String> strs = new Stack<>();
        String curr = "";
        int num = 0;

        for(char ch : s.toCharArray()){
            if(Character.isDigit(ch)){
                num = num * 10 + (ch - '0'); 
            }
            else if(ch == '['){
                counts.push(num);
                strs.push(curr);
                num = 0;
                curr = "";
            }
            else if(ch == ']'){
                int times = counts.pop();
                StringBuilder temp = new StringBuilder(strs.pop());
                temp.append(curr.repeat(times));
                curr = temp.toString();
            }
            else{
                curr += ch;
            }
        }
        return curr;
    }
}
